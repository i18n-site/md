# Установите И Используйте

## windows Сначала Устанавливает git bash

windows Система, пожалуйста, [нажмите здесь, чтобы сначала загрузить и установить `git bash`](https://git-scm.com/download/win) .

Запустите последующие операции в `git bash` .

## Установить

```sh
bash <(curl -sS https://i.i18n.site) i18
```

### Настроить Токен Перевода

Посетите [i18n.site/token](//i18n.site/token) Нажмите, чтобы скопировать токен

<img src="https://p.3ti.site/1719911689.avif" style="width:400px">

Создайте `~/.config/i18n.site.yml` , вставьте в него скопированный контент, контент следующий:

```
token: YOUR_API_TOKEN
```

Кроме того, вам необходимо привязать платежную кредитную карту [i18n.site/payBill](//i18n.site/payBill) (Пополнение счета не требуется, веб-сайт автоматически списывает комиссию в зависимости от использования, [цены см. на главной странице](/#price) ).

## Использовать

### Демо-Проект

Пожалуйста, обратитесь к демонстрационному проекту [github.com/i18n-site/demo.i18](//github.com/i18n-site/demo.i18) чтобы узнать конфигурацию `i18` перевода.

Пользователи в Китае могут клонировать [atomgit.com/i18n/demo.i18](//atomgit.com/i18n/demo.i18)

После клонирования войдите в каталог и запустите `i18` , чтобы завершить перевод.

### Структура Каталогов

Структура каталогов хранилища шаблонов следующая:

```
┌── .i18n
│  └── conf.yml
└── en
   ├── _IgnoreDemoFile.md
   ├── i18n.yml
   └── README.md
```

Переведенные демонстрационные файлы в каталоге `en` являются лишь примером и могут быть удалены.

### Запустить Перевод

Войдите в каталог и введите `i18` для перевода.

Помимо перевода, программа также сгенерирует папку `.i18n/data` , добавьте ее в репозиторий.

После перевода нового файла в этом каталоге будет создан новый файл данных. Не забудьте добавить `git add . ` .

## Конфигурационный Файл

`.i18n/conf.yml` — файл конфигурации инструмента перевода командной строки `i18`

Содержание следующее:

```
i18n:
  fromTo:
    en: zh ja ko de fr
    # en:

ignore:
  - _*
```

### Исходный Язык &

В файле конфигурации подчиненный `fromTo` :

`en` — исходный язык, `zh ja ko de fr` — целевой язык перевода.

Код языка см [i18n.site/i18/LANG_CODE](https://i18n.site/i18/LANG_CODE)

Например, если вы хотите перевести китайский на английский, перепишите эту строку `zh: en` .

Если вы хотите перевести на все поддерживаемые языки, оставьте поле пустым после `:` . например

```
i18n:
  fromTo:
    en:
```

Вы можете настроить разные `fromTo` для разных подкаталогов / Демонстрация записывается следующим образом: :

```
i18n:
  fromTo:
    en:
  path:
    blog:
      fromTo:
        zh:
    blog/your_file_name.md:
      fromTo:
        ja:
```

В этой таблице конфигурации исходный язык перевода каталога `blog` — `zh` , а исходный язык перевода каталога `blog/your_file_name.md` — `ja` .

### Многоязычные Изображения/Ссылки

Когда URL-адреса в изображениях и ссылках в `replace:` и `MarkDown` (а также атрибуты `src` и `href` встроенного `HTML` ) настроены на `.i18n/conf.yml` с этим префиксом, код исходного языка в URL-адресе будет заменен кодом языка перевода ( [язык список кодов](/i18/LANG_CODE) ).

Например, ваша конфигурация выглядит следующим образом:

```yml
i18n:
  fromTo:
    fr: ko de en zh zh-TW uk ru ja
  replace:
    https://fcdoc.github.io/img/ : ko de uk>ru zh-TW>zh >en
```

`replace: ` — словарь, ключ — префикс URL-адреса, который нужно заменить, а значение — правило замены.

Смысл замены правила `ko de uk>ru zh-TW>zh >en` выше заключается в том, что `ko de` использует изображение своего собственного языкового кода, `zh-TW` и `zh` используют изображение `zh` , `uk` использует изображение `ru` , а другие языки (например, `ja` ) используют изображение по умолчанию `en` .

Например, исходный файл французского языка ( `fr` ) с номером `MarkDown` выглядит следующим образом :

```md
![xx](https://i18n-img.github.io/fr/1.avif)
<video src="https://i18n-img.github.io/fr/1.mp4"></video>
[xx](https://i18n-img.github.io/fr/README.md)
<a style="color:red" href="https://i18n-img.github.io/fr/i18n.site.gz">xx</a>
```

Переведенный и сгенерированный файл на английском языке ( `en` ) выглядит следующим образом :

```md
![xx](https://i18n-img.github.io/en/1.avif)
<video src="https://i18n-img.github.io/en/1.mp4"></video>
[xx](https://i18n-img.github.io/en/README.md)
<a style="color:red" href="https://i18n-img.github.io/en/i18n.site.gz">xx</a>
```

Здесь `/en/` в коде исходного языка заменяются `/zh/` в целевом языке.

Примечание : До и после кода языка заменяемого текста в URL-адресе должно быть `/` .

> [!TIP]
> Если `- /` настроено в `url:` , будут сопоставляться только относительные пути, но URL-адреса, начинающиеся с `//` не будут сопоставляться.
>
> Если некоторые ссылки доменного имени требуют замены, а некоторые нет, вы можете использовать разные префиксы, например `[x](//x.com/en/)` и `[x](https://x.com/en/)` чтобы различать их.

### Игнорировать Файл

По умолчанию будут переведены все файлы, начинающиеся с `.md` и `.yml` в каталоге исходного языка.

Если вы хотите игнорировать определенные файлы и не переводить их (например, незаконченные черновики), вы можете настроить это с помощью поля `ignore` .

`ignore` использует тот же синтаксис [globset](https://docs.rs/globset/latest/globset/#syntax) что и файл `.gitignore` .

Например, `_* ` в приведенном выше файле конфигурации означает, что файлы, начинающиеся с `_` не будут переведены.

## Правила Перевода

### Редакторы Перевода Не Должны Добавлять Или Удалять Строки.

Перевод доступен для редактирования. Измените исходный текст и переведите его еще раз, внесенные вручную изменения в переводе не будут перезаписаны (если этот абзац исходного текста не был изменен).

> [!WARN]
> Между строками перевода и исходным текстом должно быть однозначное соответствие. То есть не добавляйте и не удаляйте строки при составлении перевода. В противном случае это приведет к путанице в кэше редактирования перевода.

Если что-то пойдет не так, пожалуйста, обратитесь к [FAQ для решения.](/i18/qa#H1)

### `YAML` Переводов

Инструмент командной строки найдет все файлы, заканчивающиеся на `.yml` в каталоге файлов исходного языка и переведет их.

* Обратите внимание, что суффикс имени файла должен быть `.yml` (а не `.yaml` ).

Инструмент переводит в `.yml` только значения словаря, а не ключи словаря.

Например `i18n/en/i18n.yml`

```
apiToken: API Token
defaultToken: Default Token
```

будет переведено как `i18n/zh/i18n.yml`

```
apiToken: 接口令牌
defaultToken: 默认令牌
```

Перевод `YAML` также можно изменить вручную (но не добавляйте и не удаляйте ключи или строки в переводе).

На основе `YAML` перевода вы можете легко создавать международные решения для различных языков программирования.

## Расширенное Использование

### Подкаталог Перевода

Пока создан `.i18n/conf.yml` (нет необходимости каждый раз начинать с шаблона демонстрационного проекта), `i18` будет работать нормально.

Инструмент командной строки найдет `.i18n/conf.yml` конфигураций во всех подкаталогах и переведет их.

Проекты, использующие архитектуру [monorepo](//monorepo.tools) , могут разбивать языковые файлы на подкаталоги.

![](https://p.3ti.site/1719910016.avif)

### Пользовательский Каталог Установки

По умолчанию он будет установлен в `/usr/local/bin` .

Если у `/usr/local/bin` нет разрешения на запись, он будет установлен в `~/.bin` .

Установка переменной среды `TO` может определить каталог установки, например :

```sh
TO=/bin sudo bash <(curl -sS https://i.i18n.site) i18
```